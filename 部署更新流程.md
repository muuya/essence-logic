# éƒ¨ç½²æ›´æ–°æµç¨‹

å½“ä»£ç æœ‰æ›´æ–°æ—¶ï¼Œéœ€è¦é‡æ–°éƒ¨ç½²åˆ° AI Builders Spaceã€‚æœ¬æ–‡æ¡£è¯´æ˜å¦‚ä½•æ›´æ–°éƒ¨ç½²ã€‚

## å¿«é€Ÿæ›´æ–°æµç¨‹

### 1. æäº¤ä»£ç åˆ° GitHub

```bash
# æŸ¥çœ‹æ›´æ”¹
git status

# æ·»åŠ æ›´æ”¹
git add .

# æäº¤æ›´æ”¹
git commit -m "æ›´æ–°è¯´æ˜ï¼šæè¿°ä½ çš„æ›´æ”¹"

# æ¨é€åˆ° GitHub
git push origin main
```

### 2. è§¦å‘é‡æ–°éƒ¨ç½²

éƒ¨ç½²è„šæœ¬ä¼šè‡ªåŠ¨æ‹‰å– GitHub ä¸Šçš„æœ€æ–°ä»£ç ã€‚

**æ–¹æ³•ä¸€ï¼šä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°**
```bash
python deploy.py \
  --repo-url https://github.com/muuya/essence-logic \
  --service-name essence-logic \
  --branch main
```

**æ–¹æ³•äºŒï¼šä½¿ç”¨é…ç½®æ–‡ä»¶ï¼ˆæ¨èï¼‰**

1. åˆ›å»ºæˆ–æ›´æ–° `deploy.config.json`ï¼š
```json
{
  "repo_url": "https://github.com/muuya/essence-logic",
  "service_name": "essence-logic",
  "branch": "main",
  "port": 8000,
  "env_vars": {
    "ENVIRONMENT": "production",
    "AI_SERVICE": "test"
  }
}
```

2. æ‰§è¡Œéƒ¨ç½²ï¼š
```bash
python deploy.py --config deploy.config.json
```

### 3. ç­‰å¾…éƒ¨ç½²å®Œæˆ

éƒ¨ç½²é€šå¸¸éœ€è¦ 5-10 åˆ†é’Ÿã€‚ä½ å¯ä»¥ï¼š

**ç­‰å¾…éƒ¨ç½²å®Œæˆï¼ˆæ¨èï¼‰ï¼š**
```bash
python deploy.py --config deploy.config.json --timeout 600
```

**ä¸ç­‰å¾…ï¼Œç¨åæŸ¥è¯¢ï¼š**
```bash
python deploy.py --config deploy.config.json --no-wait

# ç¨åæŸ¥è¯¢çŠ¶æ€
python deploy.py --status essence-logic
```

### 4. éªŒè¯éƒ¨ç½²

éƒ¨ç½²å®Œæˆåï¼ŒéªŒè¯æ–°ä»£ç æ˜¯å¦ç”Ÿæ•ˆï¼š

```bash
# æ£€æŸ¥éƒ¨ç½²çŠ¶æ€
python deploy.py --status essence-logic

# æµ‹è¯•ç½‘ç«™
curl https://essence-logic.ai-builders.space/health
```

## éƒ¨ç½²é€‰é¡¹è¯´æ˜

### å¸¸ç”¨å‚æ•°

- `--repo-url`: Git ä»“åº“ URLï¼ˆå¿…éœ€ï¼‰
- `--service-name`: æœåŠ¡åç§°ï¼ˆå¿…éœ€ï¼Œ3-32ä¸ªå­—ç¬¦ï¼‰
- `--branch`: Git åˆ†æ”¯ï¼ˆé»˜è®¤: mainï¼‰
- `--port`: å®¹å™¨ç«¯å£ï¼ˆé»˜è®¤: 8000ï¼‰
- `--config`: é…ç½®æ–‡ä»¶è·¯å¾„
- `--no-wait`: ä¸ç­‰å¾…éƒ¨ç½²å®Œæˆ
- `--timeout`: ç­‰å¾…è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼Œé»˜è®¤300ï¼‰
- `--status`: æŸ¥è¯¢éƒ¨ç½²çŠ¶æ€

### ç¯å¢ƒå˜é‡

å¦‚æœéœ€è¦æ›´æ–°ç¯å¢ƒå˜é‡ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½® `env_vars`ï¼š

```json
{
  "repo_url": "https://github.com/muuya/essence-logic",
  "service_name": "essence-logic",
  "branch": "main",
  "port": 8000,
  "env_vars": {
    "ENVIRONMENT": "production",
    "AI_SERVICE": "test",
    "LOG_LEVEL": "info"
  }
}
```

**æ³¨æ„ï¼š** ç¯å¢ƒå˜é‡ä¸ä¼šå­˜å‚¨åœ¨å¹³å°æ•°æ®åº“ä¸­ï¼Œæ¯æ¬¡éƒ¨ç½²éƒ½éœ€è¦é‡æ–°æä¾›ã€‚

## éƒ¨ç½²çŠ¶æ€è¯´æ˜

éƒ¨ç½²çŠ¶æ€å¯èƒ½çš„å€¼ï¼š

- `queued`: æ’é˜Ÿç­‰å¾…éƒ¨ç½²
- `deploying`: æ­£åœ¨éƒ¨ç½²
- `HEALTHY`: éƒ¨ç½²æˆåŠŸï¼ŒæœåŠ¡å¥åº·
- `UNHEALTHY`: éƒ¨ç½²æˆåŠŸä½†æœåŠ¡ä¸å¥åº·
- `DEGRADED`: æœåŠ¡é™çº§
- `ERROR`: éƒ¨ç½²å¤±è´¥
- `SLEEPING`: æœåŠ¡ä¼‘çœ ï¼ˆé•¿æ—¶é—´æ— è¯·æ±‚ï¼‰

## å¸¸è§é—®é¢˜

### 1. éƒ¨ç½²å¤±è´¥æ€ä¹ˆåŠï¼Ÿ

**æ£€æŸ¥æ—¥å¿—ï¼š**
```bash
python deploy.py --status essence-logic
```

æŸ¥çœ‹ `streaming_logs` å­—æ®µä¸­çš„é”™è¯¯ä¿¡æ¯ã€‚

**å¸¸è§åŸå› ï¼š**
- Dockerfile é”™è¯¯
- ä¾èµ–å®‰è£…å¤±è´¥
- ä»£ç é”™è¯¯
- ç«¯å£é…ç½®é”™è¯¯

**è§£å†³æ–¹æ³•ï¼š**
1. ä¿®å¤ä»£ç ä¸­çš„é”™è¯¯
2. é‡æ–°æäº¤åˆ° GitHub
3. é‡æ–°éƒ¨ç½²

### 2. å¦‚ä½•å›æ»šåˆ°ä¹‹å‰çš„ç‰ˆæœ¬ï¼Ÿ

**æ–¹æ³•ä¸€ï¼šä½¿ç”¨ Git æ ‡ç­¾**
```bash
# åˆ›å»ºæ ‡ç­¾
git tag v1.0.0
git push origin v1.0.0

# éƒ¨ç½²ç‰¹å®šæ ‡ç­¾
python deploy.py --repo-url https://github.com/muuya/essence-logic --service-name essence-logic --branch v1.0.0
```

**æ–¹æ³•äºŒï¼šä½¿ç”¨ Git commit**
```bash
# æ‰¾åˆ°ä¹‹å‰çš„ commit hash
git log --oneline

# åˆ›å»ºä¸´æ—¶åˆ†æ”¯
git checkout -b rollback <commit-hash>
git push origin rollback

# éƒ¨ç½²è¯¥åˆ†æ”¯
python deploy.py --repo-url https://github.com/muuya/essence-logic --service-name essence-logic --branch rollback
```

### 3. éƒ¨ç½²éœ€è¦å¤šé•¿æ—¶é—´ï¼Ÿ

- **é¦–æ¬¡éƒ¨ç½²ï¼š** 5-10 åˆ†é’Ÿ
- **æ›´æ–°éƒ¨ç½²ï¼š** 5-10 åˆ†é’Ÿï¼ˆå–å†³äºä»£ç å˜æ›´å¤§å°ï¼‰
- **å¿«é€Ÿæ›´æ–°ï¼š** 3-5 åˆ†é’Ÿï¼ˆä»…ä»£ç å˜æ›´ï¼Œæ— ä¾èµ–æ›´æ–°ï¼‰

### 4. å¦‚ä½•æŸ¥çœ‹éƒ¨ç½²æ—¥å¿—ï¼Ÿ

```bash
# æŸ¥çœ‹éƒ¨ç½²çŠ¶æ€ï¼ˆåŒ…å«åˆå§‹æ—¥å¿—ï¼‰
python deploy.py --status essence-logic

# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—ï¼ˆå¦‚æœ API æ”¯æŒï¼‰
# æ—¥å¿—ä¼šåœ¨ streaming_logs å­—æ®µä¸­æ˜¾ç¤º
```

### 5. éƒ¨ç½²åä»£ç æ²¡æœ‰æ›´æ–°ï¼Ÿ

**å¯èƒ½åŸå› ï¼š**
- éƒ¨ç½²è¿˜åœ¨è¿›è¡Œä¸­ï¼ˆçŠ¶æ€ä¸º `deploying`ï¼‰
- æµè§ˆå™¨ç¼“å­˜ï¼ˆå°è¯•å¼ºåˆ¶åˆ·æ–°ï¼šCtrl+F5ï¼‰
- CDN ç¼“å­˜ï¼ˆç­‰å¾…å‡ åˆ†é’Ÿï¼‰

**è§£å†³æ–¹æ³•ï¼š**
1. æ£€æŸ¥éƒ¨ç½²çŠ¶æ€ï¼š`python deploy.py --status essence-logic`
2. ç¡®è®¤ Git commit æ˜¯æœ€æ–°çš„
3. ç­‰å¾… 5-10 åˆ†é’Ÿè®©ç¼“å­˜æ›´æ–°

## æœ€ä½³å®è·µ

1. **æ¯æ¬¡æ›´æ–°å‰æµ‹è¯•æœ¬åœ°è¿è¡Œ**
   ```bash
   ./dev.sh
   # æµ‹è¯•åŠŸèƒ½æ˜¯å¦æ­£å¸¸
   ```

2. **ä½¿ç”¨æœ‰æ„ä¹‰çš„ commit æ¶ˆæ¯**
   ```bash
   git commit -m "ä¿®å¤ï¼šè§£å†³èŠå¤©å“åº”å»¶è¿Ÿé—®é¢˜"
   ```

3. **éƒ¨ç½²å‰æ£€æŸ¥ Git çŠ¶æ€**
   ```bash
   git status
   git log --oneline -5
   ```

4. **ä½¿ç”¨é…ç½®æ–‡ä»¶ç®¡ç†éƒ¨ç½²**
   - åˆ›å»º `deploy.config.json`
   - ç‰ˆæœ¬æ§åˆ¶é…ç½®æ–‡ä»¶ï¼ˆä¸åŒ…å«æ•æ„Ÿä¿¡æ¯ï¼‰
   - æ–¹ä¾¿é‡å¤éƒ¨ç½²

5. **ç›‘æ§éƒ¨ç½²çŠ¶æ€**
   - éƒ¨ç½²åç­‰å¾…å®Œæˆ
   - éªŒè¯åŠŸèƒ½æ˜¯å¦æ­£å¸¸
   - æ£€æŸ¥é”™è¯¯æ—¥å¿—

## è‡ªåŠ¨åŒ–éƒ¨ç½²ï¼ˆå¯é€‰ï¼‰

å¯ä»¥åˆ›å»ºç®€å•çš„éƒ¨ç½²è„šæœ¬ï¼š

**`deploy-update.sh`:**
```bash
#!/bin/bash
set -e

echo "ğŸš€ å¼€å§‹æ›´æ–°éƒ¨ç½²..."

# æäº¤ä»£ç 
echo "ğŸ“ æäº¤ä»£ç åˆ° GitHub..."
git add .
read -p "è¾“å…¥ commit æ¶ˆæ¯: " commit_msg
git commit -m "$commit_msg"
git push origin main

# ç­‰å¾…å‡ ç§’è®© GitHub æ›´æ–°
sleep 5

# éƒ¨ç½²
echo "ğŸ“¦ è§¦å‘éƒ¨ç½²..."
python deploy.py \
  --repo-url https://github.com/muuya/essence-logic \
  --service-name essence-logic \
  --branch main \
  --timeout 600

echo "âœ… éƒ¨ç½²å®Œæˆï¼"
echo "ğŸŒ è®¿é—®åœ°å€: https://essence-logic.ai-builders.space/"
```

ä½¿ç”¨æ–¹æ³•ï¼š
```bash
chmod +x deploy-update.sh
./deploy-update.sh
```

## ç›¸å…³æ–‡æ¡£

- [éƒ¨ç½²æŒ‡å—](./éƒ¨ç½²æŒ‡å—.md) - å®Œæ•´çš„éƒ¨ç½²æ–‡æ¡£
- [README](./README.md) - é¡¹ç›®è¯´æ˜
- [ç¯å¢ƒå˜é‡ç®¡ç†æŒ‡å—](./ç¯å¢ƒå˜é‡ç®¡ç†æŒ‡å—.md) - ç¯å¢ƒå˜é‡é…ç½®
