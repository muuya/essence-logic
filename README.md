# æœ¬è´¨çœ‹æ¿ (The Essence Logic) 4.0

ä¸€ä¸ªå¼•å¯¼å¼è§‚å¯Ÿå·¥å…·ï¼Œé€šè¿‡"å¦‚å®è§‚ç…§"å¸®åŠ©ç”¨æˆ·çœ‹æ¸…ä»€ä¹ˆæ˜¯"å¯¹çš„äº‹æƒ…"ï¼Œå¹¶åœæ­¢é‚£äº›"é”™çš„äº‹æƒ…"ã€‚åŸºäºæ®µæ°¸å¹³"æœ¬åˆ†"ä¸"å¹³å¸¸å¿ƒ"å“²å­¦ã€‚

ğŸŒ **åœ¨çº¿è®¿é—®ï¼š** [https://essence-logic.ai-builders.space/](https://essence-logic.ai-builders.space/)  
ğŸ“š **API æ–‡æ¡£ï¼š** [https://essence-logic.ai-builders.space/docs](https://essence-logic.ai-builders.space/docs)  
ğŸ“¦ **GitHub ä»“åº“ï¼š** [https://github.com/muuya/essence-logic](https://github.com/muuya/essence-logic)

## äº§å“ç†å¿µ

åœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­ï¼Œæˆ‘ä»¬åœ¨é¢å¯¹å†³ç­–ã€æŒ«æŠ˜æˆ–è¯±æƒ‘æ—¶ï¼Œå¾€å¾€è¢«**è´ªå©ªã€ææƒ§ã€è™šè£æˆ–çŸ­è§†**æ‰€è’™è”½ã€‚è¿™äº›å™ªéŸ³æ©ç›–äº†äº‹æƒ…çš„æœ¬è´¨ï¼Œè®©æˆ‘ä»¬åç¦»äº†"æœ¬åˆ†"ï¼Œå¤±å»äº†"å¹³å¸¸å¿ƒ"ã€‚

**æ ¸å¿ƒä»·å€¼ï¼š** ç°æœ‰çš„ AI åŠ©æ‰‹å¤§å¤šåœ¨æ•™äºº"å¦‚ä½•å¤šå¿«å¥½çœåœ°åšäº‹æƒ…"ï¼Œå´å¾ˆå°‘æœ‰äººå¸®åŠ©æˆ‘ä»¬æ€è€ƒ"è¿™ä»¶äº‹è¯¥ä¸è¯¥åš"ä»¥åŠ"å®ƒçš„æœ¬è´¨æ˜¯ä»€ä¹ˆ"ã€‚

## æ ¸å¿ƒåŠŸèƒ½

é€šè¿‡**"å¦‚å®è§‚ç…§"**çš„é€»è¾‘ï¼Œå¼•å¯¼ç”¨æˆ·å®Œæˆä»¥ä¸‹å››æ­¥ï¼š

1. **å®‰é¡¿ä¸æ˜ å°„ï¼ˆMirroringï¼‰ï¼š** å‡†ç¡®è¯´å‡ºç”¨æˆ·å½“ä¸‹çš„æƒ…ç»ªå’Œå¤„å¢ƒï¼Œå…è®¸æƒ…ç»ªå­˜åœ¨ï¼Œä¸åšé“å¾·è¯„åˆ¤ã€‚
2. **å›å½’å¸¸è¯†ï¼ˆTracingï¼‰ï¼š** å¼•å¯¼ç”¨æˆ·å‰¥ç¦»"è¿æ°”ã€é¢å­ã€çŸ­æœŸæš´åˆ©"ï¼Œå¯»æ‰¾æœ¬è´¨ã€‚
3. **å…±è¯†é—¨æ§›ï¼ˆConsensus Gateï¼‰ï¼š** åœ¨ç»™å»ºè®®å‰ï¼Œå¿…é¡»å…ˆç¡®è®¤æ ¸å¿ƒé—®é¢˜ã€‚
4. **å¾®å°å®è·µï¼ˆActionï¼‰ï¼š** ç¡®è®¤å…±è¯†åï¼Œä»…æä¾›"æŠŠäº‹æƒ…åšå¯¹"çš„å¾®å°èµ·å§‹ç‚¹ã€‚

## æŠ€æœ¯æ¶æ„

- **åç«¯æ¡†æ¶ï¼š** FastAPI
- **AI æœåŠ¡ï¼š** AI Builders API
- **è®¾è®¡åŸåˆ™ï¼š** æç®€ã€å¿«é€Ÿã€ç›´å‡»æœ¬è´¨

## ç¯å¢ƒè®¾ç½®

æœ¬é¡¹ç›®ä½¿ç”¨ [uv](https://github.com/astral-sh/uv) ç®¡ç† Python è™šæ‹Ÿç¯å¢ƒå’Œä¾èµ–ã€‚

### å®‰è£… uv

```bash
# macOS (ä½¿ç”¨ Homebrew)
brew install uv

# æˆ–ä½¿ç”¨å®˜æ–¹å®‰è£…è„šæœ¬
curl -LsSf https://astral.sh/uv/install.sh | sh
```

### è®¾ç½®è™šæ‹Ÿç¯å¢ƒ

```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
uv venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source .venv/bin/activate

# å®‰è£…ä¾èµ–
uv sync
```

### é…ç½®ç¯å¢ƒå˜é‡

é¡¹ç›®æ”¯æŒä¸¤ç§ AI æœåŠ¡æ¨¡å¼ï¼Œé€šè¿‡ `AI_SERVICE` ç¯å¢ƒå˜é‡é…ç½®ï¼š

- **DeepSeek ç›´æ¥è°ƒç”¨æ¨¡å¼**ï¼š`AI_SERVICE=deepseek`ï¼Œéœ€è¦è®¾ç½® `DEEPSEEK_API_KEY`
- **AI Builders API æ¨¡å¼**ï¼ˆé»˜è®¤ï¼‰ï¼š`AI_SERVICE=test`ï¼Œéœ€è¦è®¾ç½® `AI_BUILDER_TOKEN`

**æ¨èæ–¹æ³•ï¼š** åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.env` æ–‡ä»¶è¿›è¡Œé…ç½®ã€‚

**è¯¦ç»†é…ç½®è¯´æ˜ï¼š** è¯·å‚è€ƒ [ç¯å¢ƒå˜é‡ç®¡ç†æŒ‡å—](./ç¯å¢ƒå˜é‡ç®¡ç†æŒ‡å—.md)

**æ³¨æ„**: API Key å’Œ Token ä¸è¦æäº¤åˆ° Gitï¼Œ`.env` æ–‡ä»¶å·²åœ¨ `.gitignore` ä¸­ã€‚

## è¿è¡Œåº”ç”¨

### å¼€å‘æ¨¡å¼ï¼ˆæ¨èï¼‰

å¼€å‘æ¨¡å¼æ”¯æŒä»£ç è‡ªåŠ¨é‡è½½ï¼Œä¿®æ”¹ç¯å¢ƒå˜é‡åæ— éœ€é‡å¯æœåŠ¡å™¨ï¼š

```bash
# ä½¿ç”¨å¼€å‘è„šæœ¬å¯åŠ¨ï¼ˆæ¨èï¼‰
./dev.sh

# æˆ–æ‰‹åŠ¨å¯åŠ¨
source .venv/bin/activate
export ENVIRONMENT=development
uvicorn src.main:app --reload --host 0.0.0.0 --port 8000
```

**å¼€å‘æ¨¡å¼ç‰¹æ€§ï¼š**
- âœ… ä»£ç ä¿®æ”¹è‡ªåŠ¨é‡è½½ï¼ˆæ— éœ€æ‰‹åŠ¨é‡å¯ï¼‰
- âœ… ç¯å¢ƒå˜é‡ä¿®æ”¹åè°ƒç”¨ `POST /api/reload-config` å³å¯ç”Ÿæ•ˆï¼Œæ— éœ€é‡å¯

**è¯¦ç»†è¯´æ˜ï¼š** è¯·å‚è€ƒ [ç¯å¢ƒå˜é‡ç®¡ç†æŒ‡å—](./ç¯å¢ƒå˜é‡ç®¡ç†æŒ‡å—.md)

### ç”Ÿäº§æ¨¡å¼

```bash
# ä½¿ç”¨ç”Ÿäº§è„šæœ¬å¯åŠ¨
./start.sh

# æˆ–æ‰‹åŠ¨å¯åŠ¨
source .venv/bin/activate
export ENVIRONMENT=production
uvicorn src.main:app --host 0.0.0.0 --port 8000 --workers 4
```

### è®¿é—® API

- API æ–‡æ¡£ï¼šhttp://localhost:8000/docs
- OpenAPI Schemaï¼šhttp://localhost:8000/openapi.json
- ä¸»é¡µï¼šhttp://localhost:8000/
- å¥åº·æ£€æŸ¥ï¼šhttp://localhost:8000/health
- é…ç½®é‡è½½ï¼ˆä»…å¼€å‘ç¯å¢ƒï¼‰ï¼šhttp://localhost:8000/api/reload-config

## ğŸŒ åœ¨çº¿è®¿é—®

é¡¹ç›®å·²æˆåŠŸéƒ¨ç½²åˆ° AI Builders Spaceï¼Œå¯ä»¥ç›´æ¥è®¿é—®ï¼š

- **ä¸»é¡µï¼š** https://essence-logic.ai-builders.space/
- **API æ–‡æ¡£ï¼š** https://essence-logic.ai-builders.space/docs
- **å¥åº·æ£€æŸ¥ï¼š** https://essence-logic.ai-builders.space/health

## éƒ¨ç½²åˆ° AI Builders Space

é¡¹ç›®å·²é›†æˆ AI Builders API éƒ¨ç½²åŠŸèƒ½ï¼Œå¯ä»¥ä¸€é”®éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒã€‚

### é¦–æ¬¡éƒ¨ç½²

**å¿«é€Ÿéƒ¨ç½²ï¼š**
```bash
python deploy.py --repo-url https://github.com/muuya/essence-logic --service-name essence-logic --branch main
```

### æ›´æ–°éƒ¨ç½²ï¼ˆä»£ç æ›´æ–°åï¼‰

å½“ä»£ç æœ‰æ›´æ–°æ—¶ï¼ŒæŒ‰ä»¥ä¸‹æ­¥éª¤é‡æ–°éƒ¨ç½²ï¼š

1. **æäº¤ä»£ç åˆ° GitHub**
   ```bash
   git add .
   git commit -m "æ›´æ–°è¯´æ˜"
   git push origin main
   ```

2. **è§¦å‘é‡æ–°éƒ¨ç½²**
   ```bash
   python deploy.py --repo-url https://github.com/muuya/essence-logic --service-name essence-logic --branch main
   ```

   æˆ–è€…ä½¿ç”¨é…ç½®æ–‡ä»¶ï¼š
   ```bash
   # åˆ›å»ºæˆ–æ›´æ–° deploy.config.json
   {
     "repo_url": "https://github.com/muuya/essence-logic",
     "service_name": "essence-logic",
     "branch": "main",
     "port": 8000
   }
   
   # éƒ¨ç½²
   python deploy.py --config deploy.config.json
   ```

3. **æŸ¥çœ‹éƒ¨ç½²çŠ¶æ€**
   ```bash
   python deploy.py --status essence-logic
   ```

**æç¤ºï¼š**
- éƒ¨ç½²é€šå¸¸éœ€è¦ 5-10 åˆ†é’Ÿ
- éƒ¨ç½²å®Œæˆåï¼Œæ–°ä»£ç ä¼šè‡ªåŠ¨ç”Ÿæ•ˆ
- å¯ä»¥ä½¿ç”¨ `--no-wait` å‚æ•°ä¸ç­‰å¾…éƒ¨ç½²å®Œæˆ

**å½“å‰éƒ¨ç½²çŠ¶æ€ï¼š** âœ… **HEALTHY**  
**éƒ¨ç½²åœ°å€ï¼š** https://essence-logic.ai-builders.space/  
**GitHub ä»“åº“ï¼š** https://github.com/muuya/essence-logic

**è¯¦ç»†éƒ¨ç½²æ–‡æ¡£ï¼š** è¯·å‚è€ƒ [éƒ¨ç½²æŒ‡å—](./éƒ¨ç½²æŒ‡å—.md)

## å¯¹è¯è®°å½•åŠŸèƒ½

ç³»ç»Ÿä¼šè‡ªåŠ¨ä¿å­˜æ‰€æœ‰ç”¨æˆ·çš„é—®é¢˜å’Œå¯¹åº”çš„ AI å›ç­”ã€‚

### æŸ¥çœ‹å¯¹è¯è®°å½•

**å¼€å‘ç¯å¢ƒï¼š**
```bash
# ç›´æ¥è®¿é—®ï¼ˆæ— éœ€ä»¤ç‰Œï¼‰
curl http://localhost:8000/api/chat/history?limit=50
```

**ç”Ÿäº§ç¯å¢ƒï¼š**
```bash
# ä½¿ç”¨ HTTP Header æ–¹å¼ï¼ˆæ¨èï¼Œæ›´å®‰å…¨ï¼‰
curl -H "X-Admin-Token: your_admin_token" \
     "https://essence-logic.ai-builders.space/api/chat/history?limit=50"

# æˆ–ä½¿ç”¨æŸ¥è¯¢å‚æ•°æ–¹å¼ï¼ˆå…¼å®¹ï¼‰
curl "https://essence-logic.ai-builders.space/api/chat/history?limit=50&token=your_admin_token"
```

**è¯¦ç»†æ–‡æ¡£ï¼š**
- [æŸ¥çœ‹å¯¹è¯è®°å½•](./æŸ¥çœ‹å¯¹è¯è®°å½•.md) - å¼€å‘ç¯å¢ƒä½¿ç”¨è¯´æ˜
- [æŸ¥çœ‹ç”Ÿäº§ç¯å¢ƒå¯¹è¯è®°å½•](./æŸ¥çœ‹ç”Ÿäº§ç¯å¢ƒå¯¹è¯è®°å½•.md) - ç”Ÿäº§ç¯å¢ƒä½¿ç”¨è¯´æ˜

## API ä½¿ç”¨

### èŠå¤©æ¥å£

```bash
curl -X POST "http://localhost:8000/api/chat" \
  -H "Content-Type: application/json" \
  -d '{
    "messages": [
      {"role": "user", "content": "æˆ‘æƒ³æŠ•èµ„æŸä¸ªé¡¹ç›®ï¼Œä½†ä¸ç¡®å®šæ˜¯å¦è¯¥åš"}
    ],
    "model": "deepseek"
  }'
```

### Python ç¤ºä¾‹

```python
import requests

response = requests.post(
    "http://localhost:8000/api/chat",
    json={
        "messages": [
            {"role": "user", "content": "æˆ‘æƒ³æŠ•èµ„æŸä¸ªé¡¹ç›®ï¼Œä½†ä¸ç¡®å®šæ˜¯å¦è¯¥åš"}
        ],
        "model": "deepseek"
    }
)

print(response.json()["message"]["content"])
```

## é¡¹ç›®ç»“æ„

```
guide/
â”œâ”€â”€ .venv/                  # è™šæ‹Ÿç¯å¢ƒï¼ˆç”± uv åˆ›å»ºï¼‰
â”œâ”€â”€ src/                    # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ main.py            # FastAPI åº”ç”¨ä¸»æ–‡ä»¶
â”‚   â”œâ”€â”€ aibuilders_client.py  # AI Builders API å®¢æˆ·ç«¯ï¼ˆåŒ…å«éƒ¨ç½²åŠŸèƒ½ï¼‰
â”‚   â”œâ”€â”€ system_prompt.py   # ç³»ç»Ÿæç¤ºè¯
â”‚   â””â”€â”€ logger_config.py   # æ—¥å¿—é…ç½®
â”œâ”€â”€ static/                 # é™æ€æ–‡ä»¶ç›®å½•
â”‚   â””â”€â”€ index.html         # å‰ç«¯é¡µé¢
â”œâ”€â”€ logs/                   # æ—¥å¿—ç›®å½•
â”œâ”€â”€ dev.sh                  # å¼€å‘æ¨¡å¼å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰
â”œâ”€â”€ start.sh                # ç”Ÿäº§æ¨¡å¼å¯åŠ¨è„šæœ¬
â”œâ”€â”€ restart_server.sh        # é‡å¯æœåŠ¡å™¨è„šæœ¬
â”œâ”€â”€ deploy.py               # éƒ¨ç½²è„šæœ¬ï¼ˆAI Builders Spaceï¼‰
â”œâ”€â”€ deploy.config.example.json  # éƒ¨ç½²é…ç½®ç¤ºä¾‹
â”œâ”€â”€ éƒ¨ç½²æŒ‡å—.md             # éƒ¨ç½²æ–‡æ¡£
â”œâ”€â”€ éƒ¨ç½²æ›´æ–°æµç¨‹.md         # ä»£ç æ›´æ–°åçš„éƒ¨ç½²æµç¨‹
â”œâ”€â”€ æŸ¥çœ‹å¯¹è¯è®°å½•.md         # å¯¹è¯è®°å½•æŸ¥çœ‹è¯´æ˜ï¼ˆå¼€å‘ç¯å¢ƒï¼‰
â”œâ”€â”€ æŸ¥çœ‹ç”Ÿäº§ç¯å¢ƒå¯¹è¯è®°å½•.md # ç”Ÿäº§ç¯å¢ƒå¯¹è¯è®°å½•æŸ¥çœ‹è¯´æ˜
â”œâ”€â”€ äº§å“å®šä¹‰ç®€æŠ¥.md         # äº§å“å®šä¹‰æ–‡æ¡£
â”œâ”€â”€ requirements.txt        # Python ä¾èµ–åˆ—è¡¨
â”œâ”€â”€ pyproject.toml         # é¡¹ç›®é…ç½®ï¼ˆuv æ¨èï¼‰
â””â”€â”€ README.md              # æœ¬æ–‡ä»¶
```

## ç³»ç»Ÿæç¤ºè¯

ç³»ç»Ÿæç¤ºè¯å®šä¹‰äº† Chatbot çš„è¡Œä¸ºå‡†åˆ™ï¼ŒåŸºäºæ®µæ°¸å¹³"æœ¬åˆ†"ä¸"å¹³å¸¸å¿ƒ"å“²å­¦ã€‚è¯¦ç»†å†…å®¹è¯·æŸ¥çœ‹ `src/system_prompt.py` å’Œ [äº§å“å®šä¹‰ç®€æŠ¥](./äº§å“å®šä¹‰ç®€æŠ¥.md)ã€‚

## å¼€å‘å·¥ä½œæµ

### åŸºæœ¬å¼€å‘æµç¨‹

1. **æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ**
   ```bash
   source .venv/bin/activate
   ```

2. **è¿è¡Œåº”ç”¨**
   ```bash
   uvicorn src.main:app --reload
   ```

3. **æµ‹è¯• API**
   è®¿é—® http://localhost:8000/docs ä½¿ç”¨äº¤äº’å¼ API æ–‡æ¡£

## äº§å“ç›®æ ‡

**ç›®æ ‡ä¸€ï¼šå®ç°"ç›´å‡»æœ¬è´¨"çš„å¯¹è¯æ·±åº¦**
- AI å¿…é¡»åœ¨ 3 è½®å¯¹è¯å†…è¯†åˆ«å‡ºç”¨æˆ·é™ˆè¿°ä¸­çš„"éæœ¬åˆ†"åŠ¨æœº
- è¾“å‡ºç»“æœä¸­ï¼Œå…³äº"ä¸è¯¥åšä»€ä¹ˆ"çš„æƒé‡å¿…é¡»å¤§äº"è¯¥åšä»€ä¹ˆ"

**ç›®æ ‡äºŒï¼šç¡®ä¿"å¹³å¸¸å¿ƒ"çš„æ€ç»´è®­ç»ƒ**
- ç”¨æˆ·åœ¨å¯¹è¯ç»“æŸåçš„ç„¦è™‘æ„Ÿè‡ªæµ‹è¯„åˆ†å¹³å‡ä¸‹é™ 30%
- æ‰€æœ‰çš„åˆ†æå¿…é¡»åŸºäº"å¸¸è¯†"å’Œ"é€»è¾‘"ï¼Œä¸¥ç¦ä½¿ç”¨æˆåŠŸå­¦ã€é¸¡æ±¤æˆ–æœªç»è¯å®çš„é¢„æµ‹

**ç›®æ ‡ä¸‰ï¼šæç®€çš„ç”¨æˆ·ä½“éªŒ**
- å“åº”é€Ÿåº¦æå¿«ï¼Œä¸”æ²¡æœ‰ä»»ä½•å¤šä½™çš„ UI è£…é¥°ï¼Œä½“ç°"æœ¬åˆ†"çš„äº§å“è§‚

## é¡¹ç›®é“¾æ¥

- ğŸŒ **åœ¨çº¿è®¿é—®ï¼š** [https://essence-logic.ai-builders.space/](https://essence-logic.ai-builders.space/)
- ğŸ“š **API æ–‡æ¡£ï¼š** [https://essence-logic.ai-builders.space/docs](https://essence-logic.ai-builders.space/docs)
- ğŸ“¦ **GitHub ä»“åº“ï¼š** [https://github.com/muuya/essence-logic](https://github.com/muuya/essence-logic)

## æ–‡æ¡£

- ğŸ“‹ **éƒ¨ç½²æŒ‡å—ï¼š** [éƒ¨ç½²æŒ‡å—](./éƒ¨ç½²æŒ‡å—.md)
- ğŸ”„ **éƒ¨ç½²æ›´æ–°æµç¨‹ï¼š** [éƒ¨ç½²æ›´æ–°æµç¨‹](./éƒ¨ç½²æ›´æ–°æµç¨‹.md)
- ğŸ“ **æŸ¥çœ‹å¯¹è¯è®°å½•ï¼š** [æŸ¥çœ‹å¯¹è¯è®°å½•](./æŸ¥çœ‹å¯¹è¯è®°å½•.md)
- ğŸ”’ **ç”Ÿäº§ç¯å¢ƒå¯¹è¯è®°å½•ï¼š** [æŸ¥çœ‹ç”Ÿäº§ç¯å¢ƒå¯¹è¯è®°å½•](./æŸ¥çœ‹ç”Ÿäº§ç¯å¢ƒå¯¹è¯è®°å½•.md)
- ğŸ“„ **äº§å“å®šä¹‰ï¼š** [äº§å“å®šä¹‰ç®€æŠ¥](./äº§å“å®šä¹‰ç®€æŠ¥.md)

## å‚è€ƒèµ„æº

- [uv æ–‡æ¡£](https://github.com/astral-sh/uv)
- [FastAPI æ–‡æ¡£](https://fastapi.tiangolo.com/)
- [AI Builders API æ–‡æ¡£](https://space.ai-builders.com/backend/openapi.json)
- [äº§å“å®šä¹‰ç®€æŠ¥](./äº§å“å®šä¹‰ç®€æŠ¥.md)
