# æœ¬è´¨çœ‹æ¿ (The Essence Logic) 4.0

ä¸€ä¸ªå¼•å¯¼å¼è§‚å¯Ÿå·¥å…·ï¼Œé€šè¿‡"å¦‚å®è§‚ç…§"å¸®åŠ©ç”¨æˆ·çœ‹æ¸…ä»€ä¹ˆæ˜¯"å¯¹çš„äº‹æƒ…"ï¼Œå¹¶åœæ­¢é‚£äº›"é”™çš„äº‹æƒ…"ã€‚åŸºäºæ®µæ°¸å¹³"æœ¬åˆ†"ä¸"å¹³å¸¸å¿ƒ"å“²å­¦ã€‚

ğŸŒ **åœ¨çº¿è®¿é—®ï¼š** [https://essence-logic.ai-builders.space/](https://essence-logic.ai-builders.space/)  
ğŸ“š **API æ–‡æ¡£ï¼š** [https://essence-logic.ai-builders.space/docs](https://essence-logic.ai-builders.space/docs)  
ğŸ“¦ **GitHub ä»“åº“ï¼š** [https://github.com/muuya/essence-logic](https://github.com/muuya/essence-logic)

## äº§å“ç†å¿µ

åœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­ï¼Œæˆ‘ä»¬åœ¨é¢å¯¹å†³ç­–ã€æŒ«æŠ˜æˆ–è¯±æƒ‘æ—¶ï¼Œå¾€å¾€è¢«**è´ªå©ªã€ææƒ§ã€è™šè£æˆ–çŸ­è§†**æ‰€è’™è”½ã€‚è¿™äº›å™ªéŸ³æ©ç›–äº†äº‹æƒ…çš„æœ¬è´¨ï¼Œè®©æˆ‘ä»¬åç¦»äº†"æœ¬åˆ†"ï¼Œå¤±å»äº†"å¹³å¸¸å¿ƒ"ã€‚

**æ ¸å¿ƒä»·å€¼ï¼š** ç°æœ‰çš„ AI åŠ©æ‰‹å¤§å¤šåœ¨æ•™äºº"å¦‚ä½•å¤šå¿«å¥½çœåœ°åšäº‹æƒ…"ï¼Œå´å¾ˆå°‘æœ‰äººå¸®åŠ©æˆ‘ä»¬æ€è€ƒ"è¿™ä»¶äº‹è¯¥ä¸è¯¥åš"ä»¥åŠ"å®ƒçš„æœ¬è´¨æ˜¯ä»€ä¹ˆ"ã€‚

## æ ¸å¿ƒåŠŸèƒ½

é€šè¿‡**"å¦‚å®è§‚ç…§"**çš„é€»è¾‘ï¼Œå¼•å¯¼ç”¨æˆ·å®Œæˆä»¥ä¸‹å››æ­¥ï¼š

1. **å®‰é¡¿ä¸æ˜ å°„ï¼ˆMirroringï¼‰ï¼š** å‡†ç¡®è¯´å‡ºç”¨æˆ·å½“ä¸‹çš„æƒ…ç»ªå’Œå¤„å¢ƒï¼Œå…è®¸æƒ…ç»ªå­˜åœ¨ï¼Œä¸åšé“å¾·è¯„åˆ¤ã€‚
2. **å›å½’å¸¸è¯†ï¼ˆTracingï¼‰ï¼š** å¼•å¯¼ç”¨æˆ·å‰¥ç¦»"è¿æ°”ã€é¢å­ã€çŸ­æœŸæš´åˆ©"ï¼Œå¯»æ‰¾æœ¬è´¨ã€‚
3. **å…±è¯†é—¨æ§›ï¼ˆConsensus Gateï¼‰ï¼š** åœ¨ç»™å»ºè®®å‰ï¼Œå¿…é¡»å…ˆç¡®è®¤æ ¸å¿ƒé—®é¢˜ã€‚
4. **å¾®å°å®è·µï¼ˆActionï¼‰ï¼š** ç¡®è®¤å…±è¯†åï¼Œä»…æä¾›"æŠŠäº‹æƒ…åšå¯¹"çš„å¾®å°èµ·å§‹ç‚¹ã€‚

## æŠ€æœ¯æ¶æ„

- **åç«¯æ¡†æ¶ï¼š** FastAPI
- **AI æœåŠ¡ï¼š** AI Builders API
- **è®¾è®¡åŸåˆ™ï¼š** æç®€ã€å¿«é€Ÿã€ç›´å‡»æœ¬è´¨

## ç¯å¢ƒè®¾ç½®

æœ¬é¡¹ç›®ä½¿ç”¨ [uv](https://github.com/astral-sh/uv) ç®¡ç† Python è™šæ‹Ÿç¯å¢ƒå’Œä¾èµ–ã€‚

### å®‰è£… uv

```bash
# macOS (ä½¿ç”¨ Homebrew)
brew install uv

# æˆ–ä½¿ç”¨å®˜æ–¹å®‰è£…è„šæœ¬
curl -LsSf https://astral.sh/uv/install.sh | sh
```

### è®¾ç½®è™šæ‹Ÿç¯å¢ƒ

```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
uv venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source .venv/bin/activate

# å®‰è£…ä¾èµ–
uv sync
```

### é…ç½®ç¯å¢ƒå˜é‡

é¡¹ç›®æ”¯æŒä¸¤ç§ AI æœåŠ¡æ¨¡å¼ï¼Œé€šè¿‡ `AI_SERVICE` ç¯å¢ƒå˜é‡é…ç½®ï¼š

**1. DeepSeek ç›´æ¥è°ƒç”¨æ¨¡å¼ï¼ˆAI_SERVICE=deepseekï¼‰**

```bash
AI_SERVICE=deepseek
DEEPSEEK_API_KEY=sk-aa2772f56bf64e309bd3fd1885a03948
```

**2. AI Builders API æ¨¡å¼ï¼ˆAI_SERVICE=testï¼Œé»˜è®¤ï¼‰**

```bash
AI_SERVICE=test
AI_BUILDER_TOKEN=your_token_here
```

**æ¨èæ–¹æ³•ï¼šä½¿ç”¨ .env æ–‡ä»¶**

ç¼–è¾‘é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ `.env` æ–‡ä»¶ï¼Œæ ¹æ®ä½ çš„éœ€æ±‚é…ç½®ï¼š
```bash
# é€‰æ‹©æœåŠ¡ç±»å‹
AI_SERVICE=deepseek  # æˆ– test

# DeepSeek é…ç½®ï¼ˆå½“ AI_SERVICE=deepseek æ—¶ï¼‰
DEEPSEEK_API_KEY=sk-aa2772f56bf64e309bd3fd1885a03948

# AI Builders é…ç½®ï¼ˆå½“ AI_SERVICE=test æ—¶ï¼‰
AI_BUILDER_TOKEN=your_token_here
```

**æˆ–è€…ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼š**
```bash
export AI_SERVICE="deepseek"
export DEEPSEEK_API_KEY="sk-aa2772f56bf64e309bd3fd1885a03948"
```

**æ³¨æ„**: API Key å’Œ Token ä¸è¦æäº¤åˆ° Gitï¼Œ`.env` æ–‡ä»¶å·²åœ¨ `.gitignore` ä¸­ã€‚

## è¿è¡Œåº”ç”¨

### å¼€å‘æ¨¡å¼ï¼ˆæ¨èï¼‰

å¼€å‘æ¨¡å¼æ”¯æŒä»£ç è‡ªåŠ¨é‡è½½ï¼Œä¿®æ”¹ç¯å¢ƒå˜é‡åæ— éœ€é‡å¯æœåŠ¡å™¨ï¼š

```bash
# ä½¿ç”¨å¼€å‘è„šæœ¬å¯åŠ¨ï¼ˆæ¨èï¼‰
./dev.sh

# æˆ–æ‰‹åŠ¨å¯åŠ¨
source .venv/bin/activate
export ENVIRONMENT=development
uvicorn src.main:app --reload --host 0.0.0.0 --port 8000
```

**å¼€å‘æ¨¡å¼ç‰¹æ€§ï¼š**
- âœ… ä»£ç ä¿®æ”¹è‡ªåŠ¨é‡è½½ï¼ˆæ— éœ€æ‰‹åŠ¨é‡å¯ï¼‰
- âœ… ç¯å¢ƒå˜é‡ä¿®æ”¹åè°ƒç”¨ `POST /api/reload-config` å³å¯ç”Ÿæ•ˆï¼Œæ— éœ€é‡å¯
- âœ… è‡ªåŠ¨æ£€æµ‹ `.env` æ–‡ä»¶å˜åŒ–

**ä¿®æ”¹ç¯å¢ƒå˜é‡åçš„æ“ä½œï¼š**

1. ä¿®æ”¹ `.env` æ–‡ä»¶
2. è°ƒç”¨é‡è½½æ¥å£ï¼š
   ```bash
   curl -X POST http://localhost:8000/api/reload-config
   ```
3. æˆ–è®¿é—® Swagger UIï¼šhttp://localhost:8000/docsï¼Œæ‰¾åˆ° `/api/reload-config` ç«¯ç‚¹å¹¶æ‰§è¡Œ

### ç”Ÿäº§æ¨¡å¼

```bash
# ä½¿ç”¨ç”Ÿäº§è„šæœ¬å¯åŠ¨
./start.sh

# æˆ–æ‰‹åŠ¨å¯åŠ¨
source .venv/bin/activate
export ENVIRONMENT=production
uvicorn src.main:app --host 0.0.0.0 --port 8000 --workers 4
```

### è®¿é—® API

- API æ–‡æ¡£ï¼šhttp://localhost:8000/docs
- OpenAPI Schemaï¼šhttp://localhost:8000/openapi.json
- ä¸»é¡µï¼šhttp://localhost:8000/
- å¥åº·æ£€æŸ¥ï¼šhttp://localhost:8000/health
- é…ç½®é‡è½½ï¼ˆä»…å¼€å‘ç¯å¢ƒï¼‰ï¼šhttp://localhost:8000/api/reload-config

## ğŸŒ åœ¨çº¿è®¿é—®

é¡¹ç›®å·²æˆåŠŸéƒ¨ç½²åˆ° AI Builders Spaceï¼Œå¯ä»¥ç›´æ¥è®¿é—®ï¼š

- **ä¸»é¡µï¼š** https://essence-logic.ai-builders.space/
- **API æ–‡æ¡£ï¼š** https://essence-logic.ai-builders.space/docs
- **å¥åº·æ£€æŸ¥ï¼š** https://essence-logic.ai-builders.space/health

## éƒ¨ç½²åˆ° AI Builders Space

é¡¹ç›®å·²é›†æˆ AI Builders API éƒ¨ç½²åŠŸèƒ½ï¼Œå¯ä»¥ä¸€é”®éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒã€‚

### å‰ç½®è¦æ±‚

1. **è®¾ç½® AI Builders Token**
   ```bash
   export AI_BUILDER_TOKEN='your_token_here'
   ```
   æˆ–åœ¨ `.env` æ–‡ä»¶ä¸­é…ç½®ï¼š
   ```bash
   AI_BUILDER_TOKEN=your_token_here
   ```

2. **ç¡®ä¿é¡¹ç›®å¯æ­£å¸¸è¿è¡Œ**
   ```bash
   ./dev.sh  # æµ‹è¯•æœ¬åœ°è¿è¡Œ
   ```

### å¿«é€Ÿéƒ¨ç½²

**åŸºæœ¬éƒ¨ç½²ï¼ˆä½¿ç”¨é»˜è®¤é…ç½®ï¼‰ï¼š**
```bash
python deploy.py
```

**ä½¿ç”¨è‡ªå®šä¹‰é…ç½®ï¼š**
```bash
# 1. å¤åˆ¶é…ç½®ç¤ºä¾‹
cp deploy.config.example.json deploy.config.json

# 2. ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰
# ä¿®æ”¹ deploy.config.json

# 3. ä½¿ç”¨é…ç½®æ–‡ä»¶éƒ¨ç½²
python deploy.py --config deploy.config.json
```

**æŒ‡å®šé¡¹ç›®åç§°ï¼š**
```bash
python deploy.py --project-name my-essence-logic
```

### éƒ¨ç½²é€‰é¡¹

- `--config <path>`: æŒ‡å®šé…ç½®æ–‡ä»¶è·¯å¾„
- `--no-wait`: ä¸ç­‰å¾…éƒ¨ç½²å®Œæˆï¼ˆç«‹å³è¿”å›ï¼‰
- `--timeout <seconds>`: è®¾ç½®ç­‰å¾…è¶…æ—¶æ—¶é—´ï¼ˆé»˜è®¤300ç§’ï¼‰
- `--list`: åˆ—å‡ºæ‰€æœ‰éƒ¨ç½²
- `--status <deployment_id>`: æŸ¥è¯¢æŒ‡å®šéƒ¨ç½²çš„çŠ¶æ€
- `--project-name <name>`: æŒ‡å®šé¡¹ç›®åç§°

### éƒ¨ç½²ç®¡ç†

**åˆ—å‡ºæ‰€æœ‰éƒ¨ç½²ï¼š**
```bash
python deploy.py --list
```

**æŸ¥è¯¢éƒ¨ç½²çŠ¶æ€ï¼š**
```bash
python deploy.py --status <deployment_id>
```

### éƒ¨ç½²çŠ¶æ€

å½“å‰éƒ¨ç½²çŠ¶æ€ï¼šâœ… **HEALTHY**  
éƒ¨ç½²åœ°å€ï¼šhttps://essence-logic.ai-builders.space/  
GitHub ä»“åº“ï¼šhttps://github.com/muuya/essence-logic

### è¯¦ç»†æ–‡æ¡£

æ›´å¤šéƒ¨ç½²ä¿¡æ¯è¯·å‚è€ƒï¼š[éƒ¨ç½²æŒ‡å—](./éƒ¨ç½²æŒ‡å—.md)

## API ä½¿ç”¨

### èŠå¤©æ¥å£

```bash
curl -X POST "http://localhost:8000/api/chat" \
  -H "Content-Type: application/json" \
  -d '{
    "messages": [
      {"role": "user", "content": "æˆ‘æƒ³æŠ•èµ„æŸä¸ªé¡¹ç›®ï¼Œä½†ä¸ç¡®å®šæ˜¯å¦è¯¥åš"}
    ],
    "model": "deepseek"
  }'
```

### Python ç¤ºä¾‹

```python
import requests

response = requests.post(
    "http://localhost:8000/api/chat",
    json={
        "messages": [
            {"role": "user", "content": "æˆ‘æƒ³æŠ•èµ„æŸä¸ªé¡¹ç›®ï¼Œä½†ä¸ç¡®å®šæ˜¯å¦è¯¥åš"}
        ],
        "model": "deepseek"
    }
)

print(response.json()["message"]["content"])
```

## é¡¹ç›®ç»“æ„

```
guide/
â”œâ”€â”€ .venv/                  # è™šæ‹Ÿç¯å¢ƒï¼ˆç”± uv åˆ›å»ºï¼‰
â”œâ”€â”€ src/                    # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ main.py            # FastAPI åº”ç”¨ä¸»æ–‡ä»¶
â”‚   â”œâ”€â”€ aibuilders_client.py  # AI Builders API å®¢æˆ·ç«¯ï¼ˆåŒ…å«éƒ¨ç½²åŠŸèƒ½ï¼‰
â”‚   â”œâ”€â”€ system_prompt.py   # ç³»ç»Ÿæç¤ºè¯
â”‚   â””â”€â”€ logger_config.py   # æ—¥å¿—é…ç½®
â”œâ”€â”€ static/                 # é™æ€æ–‡ä»¶ç›®å½•
â”‚   â””â”€â”€ index.html         # å‰ç«¯é¡µé¢
â”œâ”€â”€ logs/                   # æ—¥å¿—ç›®å½•
â”œâ”€â”€ dev.sh                  # å¼€å‘æ¨¡å¼å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰
â”œâ”€â”€ start.sh                # ç”Ÿäº§æ¨¡å¼å¯åŠ¨è„šæœ¬
â”œâ”€â”€ restart_server.sh        # é‡å¯æœåŠ¡å™¨è„šæœ¬
â”œâ”€â”€ deploy.py               # éƒ¨ç½²è„šæœ¬ï¼ˆAI Builders Spaceï¼‰
â”œâ”€â”€ deploy.config.example.json  # éƒ¨ç½²é…ç½®ç¤ºä¾‹
â”œâ”€â”€ éƒ¨ç½²æŒ‡å—.md             # éƒ¨ç½²æ–‡æ¡£
â”œâ”€â”€ äº§å“å®šä¹‰ç®€æŠ¥.md         # äº§å“å®šä¹‰æ–‡æ¡£
â”œâ”€â”€ requirements.txt        # Python ä¾èµ–åˆ—è¡¨
â”œâ”€â”€ pyproject.toml         # é¡¹ç›®é…ç½®ï¼ˆuv æ¨èï¼‰
â””â”€â”€ README.md              # æœ¬æ–‡ä»¶
```

## ç³»ç»Ÿæç¤ºè¯

ç³»ç»Ÿæç¤ºè¯å®šä¹‰äº† Chatbot çš„è¡Œä¸ºå‡†åˆ™ï¼ŒåŸºäºæ®µæ°¸å¹³"æœ¬åˆ†"ä¸"å¹³å¸¸å¿ƒ"å“²å­¦ã€‚è¯¦ç»†å†…å®¹è¯·æŸ¥çœ‹ `src/system_prompt.py` å’Œ `äº§å“å®šä¹‰ç®€æŠ¥.md`ã€‚

## å¼€å‘å·¥ä½œæµ

### ç¯å¢ƒå˜é‡ç®¡ç†æœ€ä½³å®è·µ

**é—®é¢˜ï¼š** ä¿®æ”¹ `.env` æ–‡ä»¶åéœ€è¦é‡å¯æœåŠ¡å™¨æ‰èƒ½ç”Ÿæ•ˆï¼Œå¾ˆä¸æ–¹ä¾¿ã€‚

**è§£å†³æ–¹æ¡ˆï¼š**

1. **å¼€å‘ç¯å¢ƒä½¿ç”¨ `dev.sh` å¯åŠ¨**
   ```bash
   ./dev.sh
   ```

2. **ä¿®æ”¹ `.env` æ–‡ä»¶åï¼Œè°ƒç”¨é‡è½½æ¥å£**
   ```bash
   curl -X POST http://localhost:8000/api/reload-config
   ```
   æˆ–è€…è®¿é—® http://localhost:8000/docs ä½¿ç”¨ Swagger UI è°ƒç”¨

3. **ä»£ç ä¿®æ”¹ä¼šè‡ªåŠ¨é‡è½½**ï¼ˆuvicorn --reloadï¼‰

**å·¥ä½œåŸç†ï¼š**
- å¼€å‘ç¯å¢ƒï¼ˆ`ENVIRONMENT=development`ï¼‰æ¯æ¬¡è¯·æ±‚éƒ½ä¼šé‡æ–°åŠ è½½ `.env` æ–‡ä»¶
- ç”Ÿäº§ç¯å¢ƒï¼ˆ`ENVIRONMENT=production`ï¼‰åªåœ¨å¯åŠ¨æ—¶åŠ è½½ä¸€æ¬¡ï¼Œæ€§èƒ½æ›´å¥½
- `/api/reload-config` ç«¯ç‚¹å¯ä»¥æ‰‹åŠ¨è§¦å‘é…ç½®é‡è½½ï¼ˆä»…å¼€å‘ç¯å¢ƒï¼‰

### åŸºæœ¬å¼€å‘æµç¨‹

1. **æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ**
   ```bash
   source .venv/bin/activate
   ```

2. **è¿è¡Œåº”ç”¨**
   ```bash
   uvicorn src.main:app --reload
   ```

3. **æµ‹è¯• API**
   è®¿é—® http://localhost:8000/docs ä½¿ç”¨äº¤äº’å¼ API æ–‡æ¡£

## äº§å“ç›®æ ‡

**ç›®æ ‡ä¸€ï¼šå®ç°"ç›´å‡»æœ¬è´¨"çš„å¯¹è¯æ·±åº¦**
- AI å¿…é¡»åœ¨ 3 è½®å¯¹è¯å†…è¯†åˆ«å‡ºç”¨æˆ·é™ˆè¿°ä¸­çš„"éæœ¬åˆ†"åŠ¨æœº
- è¾“å‡ºç»“æœä¸­ï¼Œå…³äº"ä¸è¯¥åšä»€ä¹ˆ"çš„æƒé‡å¿…é¡»å¤§äº"è¯¥åšä»€ä¹ˆ"

**ç›®æ ‡äºŒï¼šç¡®ä¿"å¹³å¸¸å¿ƒ"çš„æ€ç»´è®­ç»ƒ**
- ç”¨æˆ·åœ¨å¯¹è¯ç»“æŸåçš„ç„¦è™‘æ„Ÿè‡ªæµ‹è¯„åˆ†å¹³å‡ä¸‹é™ 30%
- æ‰€æœ‰çš„åˆ†æå¿…é¡»åŸºäº"å¸¸è¯†"å’Œ"é€»è¾‘"ï¼Œä¸¥ç¦ä½¿ç”¨æˆåŠŸå­¦ã€é¸¡æ±¤æˆ–æœªç»è¯å®çš„é¢„æµ‹

**ç›®æ ‡ä¸‰ï¼šæç®€çš„ç”¨æˆ·ä½“éªŒ**
- å“åº”é€Ÿåº¦æå¿«ï¼Œä¸”æ²¡æœ‰ä»»ä½•å¤šä½™çš„ UI è£…é¥°ï¼Œä½“ç°"æœ¬åˆ†"çš„äº§å“è§‚

## é¡¹ç›®é“¾æ¥

- ğŸŒ **åœ¨çº¿è®¿é—®ï¼š** [https://essence-logic.ai-builders.space/](https://essence-logic.ai-builders.space/)
- ğŸ“š **API æ–‡æ¡£ï¼š** [https://essence-logic.ai-builders.space/docs](https://essence-logic.ai-builders.space/docs)
- ğŸ“¦ **GitHub ä»“åº“ï¼š** [https://github.com/muuya/essence-logic](https://github.com/muuya/essence-logic)
- ğŸ“‹ **éƒ¨ç½²æŒ‡å—ï¼š** [éƒ¨ç½²æŒ‡å—](./éƒ¨ç½²æŒ‡å—.md)
- ğŸ“„ **äº§å“å®šä¹‰ï¼š** [äº§å“å®šä¹‰ç®€æŠ¥](./äº§å“å®šä¹‰ç®€æŠ¥.md)

## å‚è€ƒèµ„æº

- [uv æ–‡æ¡£](https://github.com/astral-sh/uv)
- [FastAPI æ–‡æ¡£](https://fastapi.tiangolo.com/)
- [AI Builders API æ–‡æ¡£](https://space.ai-builders.com/backend/openapi.json)
- [äº§å“å®šä¹‰ç®€æŠ¥](./äº§å“å®šä¹‰ç®€æŠ¥.md)
